ã€2025/09/08 æ›´æ–° - ç¾åœ¨æœ‰å®Œæ•´è‡ªå‹•åŒ–æµç¨‹ï¼ã€‘

ğŸš€ æ¨è–¦ä½¿ç”¨æ–¹å¼ï¼š
python integrated_main.py /path/to/shorten.txt  # ä¸€éµå®Œæ•´è™•ç†
python integrated_main.py --test              # æ¸¬è©¦ç¾æœ‰è³‡æ–™

ğŸ“‹ å®Œæ•´æµç¨‹åŒ…å«ä»¥ä¸‹6å€‹è‡ªå‹•åŒ–æ­¥é©Ÿï¼š
1â†’2â†’3â†’4â†’5â†’6 è‡ªå‹•åŸ·è¡Œï¼Œç„¡éœ€æ‰‹å‹•å¹²é 

========== åŸå§‹æ‰‹å‹•æµç¨‹ï¼ˆä¾›åƒè€ƒï¼‰ ==========

1. å…ˆç”¨æœƒè­°é€šè½‰å‡ºé€å­—ç¨¿æœ‰æ™‚é–“æˆ³è¨˜çš„ç‰ˆæœ¬

2. ç„¶å¾Œç”¨shorten_transcript.py åˆªé™¤æ™‚é–“æˆ³è¨˜å’Œæ•´åˆç™¼è¨€äºº

3. (optional) æ¥è‘—å¯ä»¥ä½¿ç”¨crystal_G3.pyåšçµæ™¶æ³• 

4. åšchunk topicåˆ†æ®µ
4.1æ–‡ç« åˆ†æ®µå¯ä»¥é¸ç”¨Alg_topic_split.py æ•¸å­¸æ–¹æ³•ä¸åˆ°ä¸€ç§’ 
æˆ–æ˜¯
4.2. topic_spliterG3v2.py åšå…©ä»¶äº‹æƒ… 
- ç”¨ai(G3)åˆ†ä¸»é¡Œæ®µè½ ç´„2è¬å­—/200sec 
- çµ¦äºˆç°¡çŸ­æ‘˜è¦ä½œç‚ºtitleã€æ­¤æ‘˜è¦åŒæ™‚ä¹Ÿå–å‰15å­—ä½œç‚ºchunks_topicæª”å 
chunks_topicæª”æ¡ˆæœƒåœ¨inputfileä½ç½®ç”¢ç”Ÿchuckè³‡æ–™å¤¾è³‡æ–™å¤¾,è£¡é¢æœƒæœ‰æ•¸åæ•¸ç™¾å€‹æ®µè½æª”.md

5.æ¥è‘—ä½¿ç”¨chucks_summary.py ai(G3)å»è¼¸å…¥chuckè³‡æ–™å¤¾çš„æª”æ¡ˆè·¯å¾‘ï¼ˆç›®å‰è·¯å¾‘å¯«æ­»åœ¨ç¨‹å¼ä¸­ï¼‰ ï¼ˆä»¥ä¸Šå…©ç¨®4.1ã€4.2æ–¹æ³•éƒ½å¯ä»¥è¼¸å…¥ï¼‰
è·‘å‡ºä¾†çš„è³‡æ–™æœƒåœ¨chuckè³‡æ–™å¤¾è£¡é¢ç‚ºé•·æ‘˜è¦csvæª”"chunks_summaries_brief.csv"ï¼ˆä¹Ÿè¨±ç”¨ä¸¦è¡ŒåŒ–è™•ç†åŠ é€Ÿï¼‰
é‚„æœ‰ä¸€ä»½shorten_topicsv2/chunks_summariesv3.jsonl åŒ…å«æª”æ¡ˆåç¨±é•·æ‘˜è¦èˆ‡é€å­—ç¨¿åŸæ–‡åˆ‡ç‰‡ é©åˆæ‹¿å»ï¼²ï¼¡ï¼§

6.brief_summary_reindex.pyå¯ä»¥æŠŠä¸Šè¿°"chunks_summaries_brief.csv"è³‡æ–™åšé©ç•¶ç°¡åŒ–ï¼ˆå»é™¤ä¸éœ€è¦çš„ï½ƒï½“ï½–æ¬„ä½ï¼‰
->/chunks_summaries_brief_output/chunks_summaries_brief_reindexed.csv

7.å¯è·³é(Report_generation.pyè®€å–ä¸Šè¿°æª”æ¡ˆç”¢å‡ºå ±å‘Šä½†å› æ–‡å­—é‡éå¤§æ•ˆæœä¸ä½³)

8.ç”±æ–¼ä¸Šè¿°æª”æ¡ˆå¤ªå¤§å› æ­¤è¦å°50å¤šæ¢æ‘˜è¦é€²è¡Œåˆ‡åˆ†æˆâ€œsummary blocksâ€ï¼Œæ‰æœ‰å¯èƒ½æ’°å¯«å ±å‘Šã€‚
summary_topic_spliter.pyè®€å–shorten_topicsv2/chunks_summaries_brief_output/chunks_summaries_brief_reindexed.csv 
ä¸­çš„summaryæ¬„ä½ é€²è¡Œç´„æ¯å…«è¡Œçµ¦ï¼¡ï¼©ï¼ˆG3ï¼‰åˆ¤æ–·chuncksummary å“ªäº›å¯ä»¥å†åˆ‡å‰²æˆä¸€å¡Š(block) ,
è¼¸å‡ºåˆ°shorten_topicsv2/chunks_summaries_briefv3_topic_blocks
(ç„¶è€Œæ­¤éç¨‹çš„ï¼¡ï¼©è¼¸å‡ºå­˜åœ¨bugä½†çµæœä¾èˆŠæœ‰ä¸€å®šçš„ä¸»é¡Œå€åˆ†èƒ½åŠ›)

9.Reportcombiner.pyè®€å–ä»¥ä¸Šè³‡æ–™å¤¾chunks_summaries_briefv3_topic_blocksæœƒå°‡å…§éƒ¨ 
çš„ï¼£ï¼³ï¼¶ summary blocks æª”æ¡ˆï¼ˆex: 01_ç§‘å·¥é¤¨é ç®—å±æ©Ÿ.csv, 02_ç§‘å·¥é¤¨ç‡Ÿé‹èˆ‡é ç®—æª¢è¨.csv, ...ï¼‰
 å¯«æˆ merged_summaries.md

10.merged_summaries.md ç”±æ–¼æ¯ä¸€å€‹summary blocksçš„ï¼¡ï¼©éƒ½æœƒè©¦åœ–ç¨ç«‹å®Œæˆå ±å‘Š
å°è‡´å‡ºç¾é‡è¤‡ã€Œæœ¬æœƒè­°ç´€éŒ„...æœƒè­°ç´€éŒ„çµæŸ...ã€é‡è¤‡æ•¸é‡ç­‰æ–¼ blocks
éœ€è¦ç”¨clean_md.py ç”¨re æ¸…é™¤å¤§é‡éŒ¯èª¤å­—å…ƒ

11.clean_md.pyæœ€çµ‚ç”¢å‡ºï¼ˆæ ¼å¼ä¸ä½³ï¼Œä½†ç´°ç¯€ä¿ç•™åº¦é«˜æ–¼GPT4.5ï¼‰çš„å ±å‘Š
merged_summariesv2_cleaned.md




ä»¥ä¸‹ç‚ºä¹‹å‰çš„å¯¦é©—ï¼Œå¯ä»¥ä¸ç”¨åŸ·è¡Œï¼š
5.2æ¥è‘—ç”¨st ep1_embed_summary.pyå»è®€å–é€™å€‹ï¼£ï¼³ï¼¶ ç”¢å‡ºä»¥ä¸‹å…©è€…
    summary_embeddings.npy	N å€‹æ‘˜è¦çš„èªæ„å‘é‡ï¼ˆé€šå¸¸ç‚º 384 ç¶­ï¼‰	ç”¨æ–¼å¾ŒçºŒèªæ„èšé¡æˆ–æª¢ç´¢
    chunk_ids.npy	å°æ‡‰æ¯å€‹å‘é‡çš„ chunk åç¨±	å¯è¿½æº¯å›åŸå§‹è³‡æ–™çš„ ID æˆ–æ®µè½
    é¡èšæ•ˆæœä¸ä½³
5.3æ”¹æ¡ç”¨chuks.mdå‘é‡åŒ–é¡èš
    åŸ·è¡Œembed_cluster_chunksmd.pyï¼ˆç›®å‰è·¯å¾‘å¯«æ­»åœ¨ç¨‹å¼ä¸­ éœ€è¦topics_splitçš„è³‡æ–™å¤¾å…§æ¶µ.mdï¼‰
    ä½¿ç”¨å…©å€‹æ¨¡å‹ (Alibaba-NLP/gte-large-zh, BAAI/bge-m3) çš„åµŒå…¥
    KMeans å’Œ HDBSCAN èšé¡æ–¹æ³•ï¼Œä¸¦å¯èª¿æ•´åƒæ•¸
    ä½¿ç”¨ UMAP è¦–è¦ºåŒ–æ¯å€‹æ¨¡å‹å’Œèšé¡æ–¹æ³•çš„çµæœï¼Œè¼¸å‡ºåœ–åƒå„²å­˜åœ¨åŸè³‡æ–™å¤¾ä¸­
    é¡èšæ•ˆæœä¸ä½³